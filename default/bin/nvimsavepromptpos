#!/usr/bin/env python3
# Create a mark in host buffer
from __future__ import print_function
import os
import sys

from neovim import attach

addr = os.environ.get("NVIM_LISTEN_ADDRESS", None)

if not addr:
    exit()

nvim = attach("socket", path=addr)

try:
    nvim.feedkeys("\034\016")
    nvim.command("if exists('b:shell_prompts') | let b:shell_prompts += [line('.')] | else | let b:shell_prompts = [line('.')] | fi")
    nvim.feedkeys("a")
finally:
    nvim.stop_loop()
