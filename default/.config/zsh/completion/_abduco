#compdef abduco

local -a sessions
sessions=($(abduco | awk 'NR > 1 match($0, /[^ 	]*$/) { print substr($0, RSTART, RLENGTH) }' ORS=' '))

_arguments  "-f[Force creation of session]:session_name:->empty:bin:->create"\
            "-c[Create new session and attach]:session_name:->empty:bin:->create"\
            "-n[Create new session but don't attach]:session_name:->empty:bin:->create"\
            "-A[Create if needed and attach]:session_name:->attach:bin:->create"\
            "-r[Readonly sesson]:session_name:->attach"\
            "-a[Attach to existing session]:session_name:->attach"\
            "-l[Attach with low priority]:session_name:->attach"

case "$state" in
    attach)
        _values 'attach' $sessions
        ;;
    empty)
        true
        ;;
    create)
        _command_names
        ;;
esac
